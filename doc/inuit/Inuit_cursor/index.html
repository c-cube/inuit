<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Inuit_cursor (inuit.Inuit_cursor)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../index.html">inuit</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Inuit_cursor</span></h1></header><div class="spec type" id="type-cursor"><a href="#type-cursor" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'flags cursor</code><code></code><code></code></div><div class="doc"><p>A <code class="code">cursor</code> is very like an <code class="code">Inuit_region.t</code> with a default set of flags.
This is a convenient type to expose to higher-level code.</p><p>Since it is just a wrapper, you can refer to <code class="code">Inuit_region.t</code> for
the documentation of most functions.</p></div></div><div class="spec type" id="type-clickable"><a href="#type-clickable" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'flags clickable</code><code><span class="keyword"> = </span>[&gt; `Clickable | `Clicked ]<span class="keyword"> as </span>flags</code><code></code></div><div class="doc"><p>The set of flags for buffers with the capability to mark areas as clickable
and to receive clicks.</p></div></div><div class="spec val" id="val-null"><a href="#val-null" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>null : <span class="type-var">_</span> <a href="index.html#type-cursor">cursor</a></code></div><div class="doc"><p>A dummy cursor that is always closed. Useful as a placeholder.</p></div></div><div class="spec val" id="val-text"><a href="#val-text" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>text : <span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;flags:<span class="type-var">'flags</span> list <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">text cursor ?flags str</code> append the text <code class="code">str</code> at the right of <code class="code">cursor</code>
while moving it to right.
If <code class="code">flags</code> is not provided, default set of flags is applied.</p></div></div><div class="spec val" id="val-clear"><a href="#val-clear" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>clear : <span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">clear cursor</code> erase the content of the region containing the cursor.
New content can still be added, using <code class="code">text</code> for instance.</p></div></div><div class="spec val" id="val-kill"><a href="#val-kill" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>kill : <span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>Erase the content and close the cursor.
No content can be added anymore.</p></div></div><div class="spec val" id="val-sub"><a href="#val-sub" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>sub : <span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a></code></div><div class="doc"><p><code class="code">sub cursor</code> creates an empty sub-cursor at the right end of <code class="code">cursor</code>.
Clearing the sub-cursor will not affect other content, but clearing
<code class="code">cursor</code> will kill the sub-cursor.</p></div></div><div class="spec val" id="val-observe"><a href="#val-observe" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>observe : <span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a> <span class="keyword">&#8209;&gt;</span> [ `Local | `Remote ] <span class="keyword">&#8209;&gt;</span> <span class="type-var">'flags</span> <a href="../Inuit_base/index.html#type-patch">Inuit_base.patch</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'flags</span> list<span class="keyword"> * </span>(unit <span class="keyword">&#8209;&gt;</span> unit) option) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a></code></div><div class="doc"><p>Create a sub-cursor and associate an observer call-back.
See <code class="code">Inuit_region.observer</code> and <code class="code">Inuit_region.observe</code> for more
information.</p></div></div><div class="spec val" id="val-is_closed"><a href="#val-is_closed" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>is_closed : <span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"><p>A cursor is closed if it has no observers, all changes will be ignored.
This can happen when using <code class="code">kill</code>, or <code class="code">clear</code> on a parent cursor, and when
the root socket is closed.</p></div></div><div class="spec val" id="val-region"><a href="#val-region" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>region : <span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'flags</span> <a href="../Inuit_region/index.html#type-t">Inuit_region.t</a></code></div><div class="doc"><p>The region affected by this cursor</p></div></div><h2>Manipulating flags</h2><p>A cursor is nothing but a region with a default set of flags.
The following functions allow to manipulate this set.</p><div class="spec val" id="val-add_flag"><a href="#val-add_flag" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>add_flag : <span class="type-var">'flags</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a></code></div><div class="doc"><p>Add a flag, <code class="code">mem_flag flag (add_flag flag c) = true</code>.</p></div></div><div class="spec val" id="val-rem_flag"><a href="#val-rem_flag" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>rem_flag : <span class="type-var">'flags</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a></code></div><div class="doc"><p>Remove a flag, <code class="code">mem_flag flag (rem_flag flag c) = false</code>.</p></div></div><div class="spec val" id="val-mem_flag"><a href="#val-mem_flag" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>mem_flag : <span class="type-var">'flags</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"><p>Check if a flag is in the set of flags of the cursor.</p></div></div><div class="spec val" id="val-get_flags"><a href="#val-get_flags" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get_flags : <span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'flags</span> list</code></div><div class="doc"><p>Direct access to the list of flags.</p></div></div><div class="spec val" id="val-with_flags"><a href="#val-with_flags" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>with_flags : <span class="type-var">'flags</span> list <span class="keyword">&#8209;&gt;</span> <span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a></code></div><div class="doc"><p>Replace the set of flags with a new one.</p></div></div><h2>Manipulating indentation</h2><div class="spec val" id="val-get_indent"><a href="#val-get_indent" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get_indent : <span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"><p>Get indentation level of cursor</p></div></div><div class="spec val" id="val-with_indent"><a href="#val-with_indent" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>with_indent : <span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a> <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> <span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a></code></div><div class="doc"><p>Set indentation level of cursor</p></div></div><div class="spec val" id="val-shift_indent"><a href="#val-shift_indent" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>shift_indent : <span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a> <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> <span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a></code></div><div class="doc"><p>Add the argument to indentation level, clamp negative values to 0.
<code class="code">shift_ident t n = with_indent t (max 0 (get_indent t + n))</code></p></div></div><h2>Creating content (convenience functions)</h2><div class="spec val" id="val-clickable"><a href="#val-clickable" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>clickable : <span class="type-var">'flags</span> <a href="index.html#type-clickable">clickable</a> <a href="index.html#type-cursor">cursor</a> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a> <span class="keyword">&#8209;&gt;</span> unit) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a></code></div><div class="doc"><p>Create a sub-cursor that can be clicked.
The call-back provided as argument is invoked during a click.</p></div></div><div class="spec val" id="val-printf"><a href="#val-printf" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>printf : <span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;flags:<span class="type-var">'flags</span> list <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span>, unit, string, unit) Pervasives.format4 <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span></code></div><div class="doc"><p>Append formatted text to the cursor</p></div></div><div class="spec val" id="val-link"><a href="#val-link" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>link : <span class="type-var">'flags</span> <a href="index.html#type-clickable">clickable</a> <a href="index.html#type-cursor">cursor</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;flags:<span class="type-var">'flags</span> list <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span>, unit, string, (<span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a> <span class="keyword">&#8209;&gt;</span> unit) <span class="keyword">&#8209;&gt;</span> unit) Pervasives.format4 <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span></code></div><div class="doc"><p>A mix of <code class="code">printf</code> and <code class="code">clickable</code>: append formatted text that can be
clicked.
The callback is provided last, for instance:
<code class="code">link cursor &quot;Click to visit %s&quot; &quot;https://github.com&quot; (fun _ -&gt; ...)</code></p></div></div><div class="spec val" id="val-cursor_of_region"><a href="#val-cursor_of_region" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>cursor_of_region : ?&#8288;flags:<span class="type-var">'flags</span> list <span class="keyword">&#8209;&gt;</span> ?&#8288;indent:int <span class="keyword">&#8209;&gt;</span> <span class="type-var">'flags</span> <a href="../Inuit_region/index.html#type-t">Inuit_region.t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a></code></div><div class="doc"><p>Make a cursor from a region.</p></div></div><div class="spec val" id="val-make"><a href="#val-make" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>make : unit <span class="keyword">&#8209;&gt;</span> <span class="type-var">'flags</span> <a href="index.html#type-cursor">cursor</a><span class="keyword"> * </span><span class="type-var">'flags</span> <a href="../Inuit_base/index.html#type-patch">Inuit_base.patch</a> <a href="../Inuit_base/index.html#type-socket">Inuit_base.socket</a></code></div><div class="doc"><p><code class="code">Inuit_region.make</code> wrapper: return a root cursor and a pending socket.
Socket must be connected prior to changing the cursor.</p></div></div></body></html>